

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>11. Alonzo White Notes &mdash; Plutus Pioneer Program Lecture Notes  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="10. Week 10 - Uniswap" href="week10.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Plutus Pioneer Program Lecture Notes
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="week1.html">1. Week 01 - English Auction</a></li>
<li class="toctree-l1"><a class="reference internal" href="week2.html">2. Week 02 - Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="week3.html">3. Week 03 - Script Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="week4.html">4. Week 04 - Monads</a></li>
<li class="toctree-l1"><a class="reference internal" href="week5.html">5. Week 05 - Native Tokens</a></li>
<li class="toctree-l1"><a class="reference internal" href="week6.html">6. Week 06 - Oracles</a></li>
<li class="toctree-l1"><a class="reference internal" href="week7.html">7. Week 07 - State Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="week8.html">8. Week 08 - Property Based Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="week9.html">9. Week 09 - Marlowe</a></li>
<li class="toctree-l1"><a class="reference internal" href="week10.html">10. Week 10 - Uniswap</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">11. Alonzo White Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#aws-node-setup">11.1. AWS Node Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clone-the-test-scripts-repo">11.2. Clone the test scripts repo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generate-test-addresses">11.2.1. Generate test addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-some-test-ada">11.2.2. Get some test Ada</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Plutus Pioneer Program Lecture Notes</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">11. </span>Alonzo White Notes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/alonzo.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="alonzo-white-notes">
<h1><span class="section-number">11. </span>Alonzo White Notes<a class="headerlink" href="#alonzo-white-notes" title="Permalink to this headline">¶</a></h1>
<p>These are my notes taken while working through the Alonzo White exercises.</p>
<p>This is a work in progress. Currently it just shows how to get the node up-and-running.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The exercises are only possible if you have some test Ada from the Alonzo White faucet. Test Ada is currently only available to members
of the Alonzo test group and is used to control the traffic on the network. The number of people in the Alonzo test group is increasingly rapidly,
so if you are not able to get test Ada, you soon will be to.</p>
</div>
<p>I started with a fresh <code class="docutils literal notranslate"><span class="pre">t2.large</span></code> AWS Ubuntu EC2 instance using AMI <code class="docutils literal notranslate"><span class="pre">ami-0ff4c8fb495a5a50d</span></code> and adding a 20Gb data volume.</p>
<div class="section" id="aws-node-setup">
<h2><span class="section-number">11.1. </span>AWS Node Setup<a class="headerlink" href="#aws-node-setup" title="Permalink to this headline">¶</a></h2>
<p>Mount the <code class="docutils literal notranslate"><span class="pre">data</span></code> volume.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo mkfs -t xfs /dev/xvdh
sudo mkdir /data
sudo mount /dev/xvdh /data
sudo chown ubuntu:ubuntu /data
</pre></div>
</div>
<p>Setup the IOHK Binary Cache</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo mkdir -p /etc/nix
cat <span class="s">&lt;&lt;EOF | sudo tee /etc/nix/nix.conf</span>
<span class="s">substituters = https://cache.nixos.org https://hydra.iohk.io https://iohk.cachix.org</span>
<span class="s">trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= hydra.iohk.io:f/Ea+s+dFdN+3Y/G+FDgSq+a5NEWhJGzdjvKNGv0/EQ= iohk.cachix.org-1:DpRUyj7h7V830dp/i6Nti+NEO2/nhblbov/8MW7Rqoo=</span>
<span class="s">EOF</span>
</pre></div>
</div>
<p>Install Nix</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir /data/nix
sudo ln -s /data/nix /nix
<span class="nb">echo</span> <span class="s2">&quot;export NIX_IGNORE_SYMLINK_STORE=1&quot;</span> &gt;&gt; <span class="s2">&quot;~/.bashrc</span>
<span class="s2">source ~/.bashrc</span>
<span class="s2">curl -L https://nixos.org/nix/install | sh</span>
<span class="s2">. /home/ubuntu/.nix-profile/etc/profile.d/nix.sh</span>
</pre></div>
</div>
<p>Download the Cardano Node</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /data
git clone https://github.com/input-output-hk/cardano-node
<span class="nb">cd</span> cardano-node
git checkout tags/alonzo-white-1.1 -b alonzo_white_1_1
nix-build -A scripts.alonzo-white.node -o result/alonzo-white/cardano-node-alonzo-white
nix-build -A cardano-cli -o result/alonzo-white/cardano-cli
</pre></div>
</div>
<p>Start the node</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /data/cardano-node/result/alonzo-white
./cardano-node-alonzo-white/bin/cardano-node-alonzo-white
</pre></div>
</div>
<p>Leave this running and open another shell.</p>
<p>Setup some handy environment variables</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;export CARDANO_CLI=/data/cardano-node/result/alonzo-white/cardano-cli/bin/cardano-cli&quot;</span> &gt;&gt; ~/.bashrc
<span class="nb">echo</span> <span class="s2">&quot;export TESTNET_MAGIC_NUM=7&quot;</span> &gt;&gt; ~/.bashrc
<span class="nb">echo</span> <span class="s2">&quot;export CARDANO_NODE_SOCKET_PATH=/data/cardano-node/result/alonzo-white/state-node-alonzo-white/node.socket&quot;</span> &gt;&gt; ~/.bashrc
<span class="nb">source</span> ~/.bashrc
</pre></div>
</div>
<p>You can check on the status of the node with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">$CARDANO_CLI</span> query tip --testnet-magic <span class="nv">$TESTNET_MAGIC_NUM</span>
</pre></div>
</div>
<p>You should see something like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;epoch&quot;</span><span class="p">:</span> <span class="mi">289</span><span class="p">,</span>
    <span class="nt">&quot;hash&quot;</span><span class="p">:</span> <span class="s2">&quot;7521f071d0bfc050cde302f1352ed44c2fc74927f1e28afea1b1df2c4c012d5c&quot;</span><span class="p">,</span>
    <span class="nt">&quot;slot&quot;</span><span class="p">:</span> <span class="mi">2079664</span><span class="p">,</span>
    <span class="nt">&quot;block&quot;</span><span class="p">:</span> <span class="mi">102026</span><span class="p">,</span>
    <span class="nt">&quot;era&quot;</span><span class="p">:</span> <span class="s2">&quot;Alonzo&quot;</span><span class="p">,</span>
    <span class="nt">&quot;syncProgress&quot;</span><span class="p">:</span> <span class="s2">&quot;100.00&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can use <code class="docutils literal notranslate"><span class="pre">jt</span></code> if you ever want to get some specific information, for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install jq -y
<span class="nv">$CARDANO_CLI</span> query tip --testnet-magic <span class="m">7</span> <span class="p">|</span> jq -r <span class="s1">&#39;.syncProgress&#39;</span>
<span class="m">100</span>.0
</pre></div>
</div>
</div>
<div class="section" id="clone-the-test-scripts-repo">
<h2><span class="section-number">11.2. </span>Clone the test scripts repo<a class="headerlink" href="#clone-the-test-scripts-repo" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /data
git clone https://github.com/chris-moreton/plutus-scripts
</pre></div>
</div>
<div class="section" id="generate-test-addresses">
<h3><span class="section-number">11.2.1. </span>Generate test addresses<a class="headerlink" href="#generate-test-addresses" title="Permalink to this headline">¶</a></h3>
<p>Run the generate wallets script to generate a few addresses.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /data/plutus-scripts
./generateAddresses.sh
</pre></div>
</div>
<p>This will create some <code class="docutils literal notranslate"><span class="pre">.addr</span></code>, <code class="docutils literal notranslate"><span class="pre">.skey</span></code> and <code class="docutils literal notranslate"><span class="pre">.vkey</span></code> files in the <code class="docutils literal notranslate"><span class="pre">wallets</span></code> directory.</p>
</div>
<div class="section" id="get-some-test-ada">
<h3><span class="section-number">11.2.2. </span>Get some test Ada<a class="headerlink" href="#get-some-test-ada" title="Permalink to this headline">¶</a></h3>
<p>If you have access to the testnet faucet, transfer the test Ada to the <code class="docutils literal notranslate"><span class="pre">main</span></code> wallet.</p>
<p>Then, check that it has arrived.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /data/plutus-scripts
./balance.sh main

TxHash                                 TxIx        Amount
--------------------------------------------------------------------------------------
40f0fa60a71e247e3eca46147fc159080aa7667763ae8c3be00b2e48400bbccd     <span class="m">0</span>        <span class="m">1000000000000</span> lovelace + TxOutDatumHashNone
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="week10.html" class="btn btn-neutral float-left" title="10. Week 10 - Uniswap" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright .

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>